!function(t){var e={};function s(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=1)}([function(t,e){Array.prototype.firstOrDefault=function(t){for(const e of this)if(t(e))return e;return null},Array.prototype.first=function(t){for(const e of this)if(t(e))return e;throw console.log("item not found"),console.log(this),"item not found"},Array.prototype.getNext=function(t,e){var s=e(t)+1,i=this.firstOrDefault(t=>e(t)==s);return i||(i=this.first(t=>1==e(t))),i},Array.prototype.removeItem=function(t){var e=this.indexOf(t);if(-1==e)throw"item not found";this.splice(e,1)},Array.prototype.contains=function(t){return-1!==this.indexOf(t)},Array.prototype.removeItemIfExists=function(t){var e=this.indexOf(t);-1!=e&&this.splice(e,1)},Array.prototype.addItemIfNotExists=function(t){-1==this.indexOf(t)&&this.push(t)},Array.prototype.remove=function(t){this.removeItem(this.first(t))},Array.prototype.toList=function(){return this.filter(t=>!0)}},function(t,e,s){"use strict";s.r(e);class i{constructor(){this.drawFunctions=[],this.resize=(()=>{console.log("canvas.resize()"),this.canvas.width=this.canvas.clientWidth,this.canvas.height=this.canvas.clientHeight}),this.draw=(()=>{for(const t of this.drawFunctions)t(this.ctx,this.width,this.height)}),this.addDrawFunction=(t=>{this.drawFunctions.push(t)}),this.removeDrawFunction=(t=>{this.drawFunctions.splice(this.drawFunctions.indexOf(t),1)})}get width(){return this.canvas.width}get height(){return this.canvas.height}static createFullScreen(){document.body.parentElement.style.height="100%",document.body.style.height="100%",document.body.style.margin="0",document.body.style.overflow="hidden";var t=document.createElement("canvas");document.body.appendChild(t),t.style.width="100%",t.style.height="100%";var e=new i;return e.canvas=t,e.ctx=t.getContext("2d"),window.addEventListener("resize",e.resize),e.resize(),e}}i.cursorLock=null,i.SetCursor=((t,e)=>{e?(document.body.style.cursor="pointer",i.cursorLock=t):t==i.cursorLock&&(document.body.style.cursor="default",i.cursorLock=null)});class r{constructor(t,e,s,i){this.x=t,this.y=e,this.width=s,this.height=i,this.collidesWith=(t=>{var e=!1,s=!1;return this.x<=t.x?this.x<=t.x&&this.x+this.width>t.x&&(e=!0):t.x<=this.x&&t.x+t.width>this.x&&(e=!0),e&&(this.y<=t.y?this.y<=t.y&&this.y+this.width>t.y&&(s=!0):t.y<=this.y&&t.y+t.width>this.y&&(s=!0)),e&&s}),this.isHitBy=((t,e)=>t>this.x&&t<this.x+this.width&&e>this.y&&e<this.y+this.height)}}class n{constructor(){this.updateFunctions=[],this.isRunning=!1,this.addUpdateFunction=(t=>{this.updateFunctions.push(t)}),this.removeUpdateFunction=(t=>{this.updateFunctions.splice(this.updateFunctions.indexOf(t),1)}),this.setFps=(t=>{this.fps=t,this.fpsInterval=1e3/this.fps}),this.animationLoop=(()=>{this.isRunning&&requestAnimationFrame(this.animationLoop);var t=Date.now(),e=t-this.lastFrameTime;if(e>this.fpsInterval){this.lastFrameTime=t;var s=e/1e3;for(const t of this.updateFunctions)t(s)}}),this.setFps(30),this.play(),document.addEventListener("keyup",t=>{80==t.keyCode&&this.playPause()})}play(){this.isRunning||(console.log("play"),this.isRunning=!0,this.lastFrameTime=Date.now(),this.animationLoop())}pause(){this.isRunning&&(console.log("pause"),this.isRunning=!1)}playPause(){this.isRunning?this.pause():this.play()}}class o{constructor(t){this.canvas=t,this.mouseMove=(t=>{this.view.mouseMove(t)}),this.click=(t=>{this.view&&this.view.click(t)}),this.render=((t,e,s)=>{this.view&&(this.shouldUpdateLayout&&(this.view.updateLayout(t,new r(0,0,e,s)),this.shouldUpdateLayout=!1),t.clearRect(0,0,e,s),this.view.render(t))}),this.setView=(t=>{this.view=t,this.shouldUpdateLayout=!0}),t.addDrawFunction(this.render),document.addEventListener("mousemove",this.mouseMove),document.addEventListener("click",this.click)}static create(){var t=i.createFullScreen(),e=new o(t);return(new n).addUpdateFunction(t.draw),e}}class h{constructor(){this.generateNewId=(()=>(h.idCounter++,h.idCounter)),this.bounds=new r(0,0,0,0),this.id=this.generateNewId(),this.name="object "+this.id}}h.idCounter=0;class a extends h{constructor(){super(...arguments),this.children=[],this.shouldUpdateLayout=!1,this.triggerUpdateLayout=(()=>{this.shouldUpdateLayout=!0})}render(t){this.shouldUpdateLayout&&(this.updateLayout(t,this.bounds),this.shouldUpdateLayout=!1);for(const e of this.children)e.render(t)}mouseMove(t){for(const e of this.children)e.mouseMove(t)}click(t){for(const e of this.children.toList())e.click(t)}}class d extends h{constructor(t){super(),this.star=t}render(t){t.fillStyle="white",t.beginPath(),t.arc(this.star.x,this.star.y,this.star.r,0,2*Math.PI),t.fill()}mouseMove(t){throw new Error("Method not implemented.")}click(t){throw new Error("Method not implemented.")}}class l extends a{constructor(t){super(),this.starLayer=t,this.triggerUpdateLayout()}updateLayout(t,e){for(const t of this.starLayer.stars)this.children.push(new d(t))}mouseMove(t){}click(t){}}var c;!function(t){t[t.hidden=0]="hidden",t[t.beforeVisible=1]="beforeVisible",t[t.visible=2]="visible"}(c||(c={}));class u{constructor(){this.state=c.hidden}}class y{constructor(){this.listeners=[],this.addEventListener=(t=>{if(!t||this.listeners.indexOf(t)>=0)throw"listener already added";this.listeners.push(t)}),this.dispatchEvent=(t=>{for(let e=0;e<this.listeners.length;e++){(0,this.listeners[e])(t)}}),this.removeEventListener=(t=>{if(!t||this.listeners.indexOf(t)<0)throw"listener not found";this.listeners.splice(this.listeners.indexOf(t),1)})}}class p extends h{constructor(){super(...arguments),this.isMouseOver=!1,this.isEnabled=!0,this.clicked=new y,this.mouseMove=(t=>{this.isEnabled&&(this.bounds.isHitBy(t.clientX,t.clientY)?(this.isMouseOver=!0,i.SetCursor(this.name,!0)):(this.isMouseOver=!1,i.SetCursor(this.name,!1)))}),this.click=(t=>{this.isEnabled&&this.bounds.isHitBy(t.clientX,t.clientY)&&this.clicked.dispatchEvent(this)})}}class v{constructor(){this.fontSize=40,this.fillStyle="black",this.mouseOverFillStyle="red",this.backgroundFillStyle=void 0}}class f extends p{constructor(){super(...arguments),this.properties=new v,this.isVisible=!0,this.horizontalAlign="center",this.verticalAlign="center",this.render=(t=>{this.isVisible&&(this.properties.backgroundFillStyle&&(t.fillStyle=this.properties.backgroundFillStyle,t.fillRect(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height)),this.isMouseOver?t.fillStyle=this.properties.mouseOverFillStyle:t.fillStyle=this.properties.fillStyle,t.font=this.properties.fontSize+"px Arial",t.textAlign="left",t.textBaseline="top",t.fillText(this.text,this.bounds.x,this.bounds.y))}),this.align=((t,e)=>{t.font=this.properties.fontSize+"px Arial",t.textAlign="left",t.textBaseline="top";var s=t.measureText(this.text),i=new r(0,0,s.width,this.properties.fontSize);switch(this.horizontalAlign){case"left":i.x=e.x;break;case"center":i.x=e.x-s.width/2;break;case"right":i.x=e.x-s.width}switch(this.verticalAlign){case"top":i.y=e.y;break;case"center":i.y=e.y-this.properties.fontSize/2;break;case"bottom":i.y=e.y-this.properties.fontSize}this.bounds=i})}}class w{constructor(t,e){this.x=t,this.y=e}}class m{constructor(t,e){this.x=t,this.y=e}}class g extends a{constructor(){super(...arguments),this.spacing=30}get items(){return this.children}set items(t){this.children=t}updateLayout(t,e){var s=this.items.length;if(s>0){var i=e.width/2;for(let n=0;n<s;n++){var r=e.height/2-this.spacing*(s-1)/2+n*this.spacing;this.items[n].align(t,new m(i,r))}}}}class L extends a{constructor(){super(),this.viewModel=new u,this.lastMoved=Date.now(),this.inactivityTimeout=2e3,this.addStarLayer=(t=>{this.updateSettings()}),this.removeStarLayer=(t=>{this.updateSettings()}),this.showHideOverlayClicked=(t=>{this.viewModel.state==c.visible?this.setState(c.beforeVisible):this.setState(c.visible)}),this.mouseMove=(t=>{this.viewModel.state!=c.hidden&&this.viewModel.state!=c.beforeVisible||this.setState(c.beforeVisible),super.mouseMove(t)}),this.mouseInactivityHandler=(()=>{Date.now()-this.lastMoved>=this.inactivityTimeout?this.viewModel.state==c.beforeVisible&&this.setState(c.hidden):setTimeout(this.mouseInactivityHandler,this.inactivityTimeout-(Date.now()-this.lastMoved))}),this.setState=(t=>{switch(t){case c.hidden:this.showOverLayerButton.isVisible=!1,this.viewModel.state=c.hidden;break;case c.beforeVisible:this.lastMoved=Date.now(),this.viewModel.state==c.hidden&&(setTimeout(this.mouseInactivityHandler,this.inactivityTimeout),this.showOverLayerButton.isVisible=!0),this.viewModel.state==c.visible&&(setTimeout(this.mouseInactivityHandler,this.inactivityTimeout),this.children.removeItemIfExists(this.settingsList)),this.viewModel.state=c.beforeVisible;break;case c.visible:this.viewModel.state==c.beforeVisible&&(this.children.push(this.settingsList),this.updateSettings()),this.viewModel.state=c.visible}}),this.showOverLayerButton=new f,this.showOverLayerButton.text="Show/Hide Settings",this.showOverLayerButton.properties.fillStyle="green",this.showOverLayerButton.verticalAlign="top",this.showOverLayerButton.horizontalAlign="left",this.showOverLayerButton.clicked.addEventListener(this.showHideOverlayClicked),this.showOverLayerButton.properties.backgroundFillStyle="rgba(0, 0, 0, 0.5)",this.children.push(this.showOverLayerButton),this.settingsList=new g;var t=new f;t.properties.fillStyle="white",this.settingsList.items.push(t),M.settings.onAddStarLayer.addEventListener(this.addStarLayer),M.settings.onRemoveStarLayer.addEventListener(this.removeStarLayer)}updateLayout(t,e){this.showOverLayerButton.align(t,new w(e.x,e.y)),this.settingsList.updateLayout(t,new r(100,100,400,400))}updateSettings(){this.settingsList.items=[];for(const e of M.settings.starLayers){var t=new f;t.text="Remove Layer",t.tag=e,t.properties.fillStyle="white",this.settingsList.items.push(t),t.clicked.addEventListener(t=>{M.settings.removeStarLayer(e)})}var e=new f;e.text="Add Layer",e.properties.fillStyle="white",this.settingsList.items.push(e),e.clicked.addEventListener(t=>{M.settings.addStarLayer()}),this.triggerUpdateLayout()}}class b{constructor(t){this.starLayer=t,this.update=(t=>{for(const e of this.starLayer.stars)e.x+=this.starLayer.speed*t,e.x>M.settings.width&&(e.x-=M.settings.width)})}}class x extends a{constructor(){super(),this.starLayers=[],this.starAnimators=[],this.addStarLayer=(t=>{var e=new l(t);this.starLayers.push(e),this.children.splice(0,0,e),this.triggerUpdateLayout();var s=new b(t);this.anim.addUpdateFunction(s.update),this.starAnimators.push(s)}),this.removeStarLayer=(t=>{var e=this.starLayers.first(e=>e.starLayer==t);this.children.remove(t=>t==e),this.starLayers.remove(t=>t==e);var s=this.starAnimators.first(e=>e.starLayer==t);this.anim.removeUpdateFunction(s.update),this.starAnimators.removeItem(s),this.triggerUpdateLayout()}),this.settingsOverlay=new L,this.children.push(this.settingsOverlay),this.anim=new n,M.settings.onAddStarLayer.addEventListener(this.addStarLayer),M.settings.onRemoveStarLayer.addEventListener(this.removeStarLayer)}updateLayout(t,e){for(const s of this.starLayers)s.updateLayout(t,e);this.settingsOverlay.updateLayout(t,e)}}class S{constructor(){this.stars=[],this.speed=20*Math.random()+5}}class M{constructor(){this.run=(()=>{console.log("hi"),document.body.style.backgroundColor="black";var t=o.create(),e=new x;t.setView(e)})}}M.settings=new class{constructor(t,e){this.width=t,this.height=e,this.onAddStarLayer=new y,this.onRemoveStarLayer=new y,this.starLayers=[],this.addStarLayer=(()=>{var t=new S;for(let e=0;e<100;e++)t.stars.push({x:Math.random()*this.width,y:Math.random()*this.height,r:2*Math.random()+.05});this.starLayers.push(t),this.onAddStarLayer.dispatchEvent(t)}),this.removeStarLayer=(t=>{this.starLayers.removeItem(t),this.onRemoveStarLayer.dispatchEvent(t)})}}(window.innerWidth,window.innerHeight);s(0);document.addEventListener("DOMContentLoaded",function(){(new M).run()},!1)}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vZW5jL3NyYy9leHRlbnNpb25zLnRzIiwid2VicGFjazovLy8uL2VuYy9zcmMvdWkvZUNhbnZhcy50cyIsIndlYnBhY2s6Ly8vLi9lbmMvc3JjL2dlb21ldHJ5L3JlY3RhbmdsZS50cyIsIndlYnBhY2s6Ly8vLi9lbmMvc3JjL2VBbmltYXRpb24udHMiLCJ3ZWJwYWNrOi8vLy4vZW5jL3NyYy91aS9zdGFnZS50cyIsIndlYnBhY2s6Ly8vLi9lbmMvc3JjL3VpL3JlbmRlck9iamVjdC50cyIsIndlYnBhY2s6Ly8vLi9lbmMvc3JjL3VpL2xheW91dENvbnRyb2xzL2xheW91dFZpZXcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0YXJSZW5kZXJPYmplY3QudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0YXJMYXllckRyYXdlci50cyIsIndlYnBhY2s6Ly8vLi9zcmMvb3ZlcmxheS9zZXR0aW5nc092ZXJsYXlWaWV3TW9kZWxTdGF0ZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvb3ZlcmxheS9zZXR0aW5nc092ZXJsYXlWaWV3TW9kZWwudHMiLCJ3ZWJwYWNrOi8vLy4vZW5jL3NyYy9lRXZlbnQudHMiLCJ3ZWJwYWNrOi8vLy4vZW5jL3NyYy91aS9jb250cm9scy9jb250cm9sLnRzIiwid2VicGFjazovLy8uL2VuYy9zcmMvdWkvY29udHJvbHMvcHJpbWl0aXZlcy9idXR0b25Qcm9wZXJ0aWVzLnRzIiwid2VicGFjazovLy8uL2VuYy9zcmMvdWkvY29udHJvbHMvYnV0dG9uLnRzIiwid2VicGFjazovLy8uL2VuYy9zcmMvZ2VvbWV0cnkvcG9pbnQudHMiLCJ3ZWJwYWNrOi8vLy4vZW5jL3NyYy9nZW9tZXRyeS9Qb2ludC50cyIsIndlYnBhY2s6Ly8vLi9lbmMvc3JjL3VpL2xheW91dENvbnRyb2xzL2xpc3RWaWV3LnRzIiwid2VicGFjazovLy8uL3NyYy9vdmVybGF5L3NldHRpbmdzT3ZlcmxheVZpZXcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0YXJMYXllckFuaW1hdG9yLnRzIiwid2VicGFjazovLy8uL3NyYy9pbnNwaWVydHlQbGF5ZXJWaWV3LnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbHMvc3RhckxheWVyLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHAudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVscy9zZXR0aW5ncy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJBcnJheSIsImZpcnN0T3JEZWZhdWx0IiwiZnVuYyIsImFycmF5SXRlbSIsInRoaXMiLCJmaXJzdCIsImNvbnNvbGUiLCJsb2ciLCJnZXROZXh0IiwiY3VycmVudCIsInNlbGVjdG9yIiwibmV4dFBvc2l0aW9uIiwibmV4dCIsIngiLCJyZW1vdmVJdGVtIiwiaXRlbSIsImluZGV4IiwiaW5kZXhPZiIsInNwbGljZSIsImNvbnRhaW5zIiwicmVtb3ZlSXRlbUlmRXhpc3RzIiwiYWRkSXRlbUlmTm90RXhpc3RzIiwicHVzaCIsInJlbW92ZSIsInRvTGlzdCIsImZpbHRlciIsIkVDYW52YXMiLCJbb2JqZWN0IE9iamVjdF0iLCJkcmF3RnVuY3Rpb25zIiwicmVzaXplIiwiY2FudmFzIiwid2lkdGgiLCJjbGllbnRXaWR0aCIsImhlaWdodCIsImNsaWVudEhlaWdodCIsImRyYXciLCJkcmF3RnVuY3Rpb24iLCJjdHgiLCJhZGREcmF3RnVuY3Rpb24iLCJyZW1vdmVEcmF3RnVuY3Rpb24iLCJkb2N1bWVudCIsImJvZHkiLCJwYXJlbnRFbGVtZW50Iiwic3R5bGUiLCJtYXJnaW4iLCJvdmVyZmxvdyIsImNyZWF0ZUVsZW1lbnQiLCJhcHBlbmRDaGlsZCIsImVuQ2FudmFzIiwiZ2V0Q29udGV4dCIsIndpbmRvdyIsImFkZEV2ZW50TGlzdGVuZXIiLCJjdXJzb3JMb2NrIiwiU2V0Q3Vyc29yIiwicG9pbnRlciIsImN1cnNvciIsIlJlY3RhbmdsZSIsInkiLCJjb2xsaWRlc1dpdGgiLCJyZWN0YW5nbGUiLCJoaXR4IiwiaGl0eSIsImlzSGl0QnkiLCJFQW5pbWF0aW9uIiwidXBkYXRlRnVuY3Rpb25zIiwiaXNSdW5uaW5nIiwiYWRkVXBkYXRlRnVuY3Rpb24iLCJyZW1vdmVVcGRhdGVGdW5jdGlvbiIsInNldEZwcyIsImZwcyIsImZwc0ludGVydmFsIiwiYW5pbWF0aW9uTG9vcCIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIm5vdyIsIkRhdGUiLCJlbGFwc2VkIiwibGFzdEZyYW1lVGltZSIsInRpbWVEaWZmIiwidXBkYXRlRnVuY3Rpb24iLCJwbGF5IiwiZXZlbnQiLCJrZXlDb2RlIiwicGxheVBhdXNlIiwicGF1c2UiLCJzdGFnZV9TdGFnZSIsIm1vdXNlTW92ZSIsImV2IiwidmlldyIsImNsaWNrIiwicmVuZGVyIiwic2hvdWxkVXBkYXRlTGF5b3V0IiwidXBkYXRlTGF5b3V0IiwiY2xlYXJSZWN0Iiwic2V0VmlldyIsImNyZWF0ZUZ1bGxTY3JlZW4iLCJzdGFnZSIsInJlbmRlck9iamVjdF9SZW5kZXJPYmplY3QiLCJnZW5lcmF0ZU5ld0lkIiwiaWRDb3VudGVyIiwiYm91bmRzIiwiaWQiLCJsYXlvdXRWaWV3X0xheW91dFZpZXciLCJjaGlsZHJlbiIsInRyaWdnZXJVcGRhdGVMYXlvdXQiLCJjaGlsZCIsInN0YXJSZW5kZXJPYmplY3RfU3RhclJlbmRlck9iamVjdCIsInN0YXIiLCJzdXBlciIsImZpbGxTdHlsZSIsImJlZ2luUGF0aCIsImFyYyIsIk1hdGgiLCJQSSIsImZpbGwiLCJFcnJvciIsInN0YXJMYXllckRyYXdlcl9TdGFyTGF5ZXJEcmF3ZXIiLCJzdGFyTGF5ZXIiLCJzdGFycyIsIlNldHRpbmdzT3ZlcmxheVZpZXdNb2RlbFN0YXRlIiwic2V0dGluZ3NPdmVybGF5Vmlld01vZGVsX1NldHRpbmdzT3ZlcmxheVZpZXdNb2RlbCIsInN0YXRlIiwiaGlkZGVuIiwiRUV2ZW50VCIsImxpc3RlbmVycyIsImxpc3RlbmVyIiwiZGlzcGF0Y2hFdmVudCIsImFyZyIsImxlbmd0aCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjb250cm9sX0NvbnRyb2wiLCJpc01vdXNlT3ZlciIsImlzRW5hYmxlZCIsImNsaWNrZWQiLCJjbGllbnRYIiwiY2xpZW50WSIsIkJ1dHRvblByb3BlcnRpZXMiLCJmb250U2l6ZSIsIm1vdXNlT3ZlckZpbGxTdHlsZSIsImJhY2tncm91bmRGaWxsU3R5bGUiLCJ1bmRlZmluZWQiLCJidXR0b25fQnV0dG9uIiwicHJvcGVydGllcyIsImlzVmlzaWJsZSIsImhvcml6b250YWxBbGlnbiIsInZlcnRpY2FsQWxpZ24iLCJmaWxsUmVjdCIsImZvbnQiLCJ0ZXh0QWxpZ24iLCJ0ZXh0QmFzZWxpbmUiLCJmaWxsVGV4dCIsInRleHQiLCJhbGlnbiIsInBvc2l0aW9uIiwic2l6ZSIsIm1lYXN1cmVUZXh0IiwiUG9pbnQiLCJQb2ludF9Qb2ludCIsImxpc3RWaWV3X0xpc3RWaWV3Iiwic3BhY2luZyIsIml0ZW1zIiwidiIsImNvdW50Iiwic2V0dGluZ3NPdmVybGF5Vmlld19TZXR0aW5nc092ZXJsYXlWaWV3Iiwidmlld01vZGVsIiwibGFzdE1vdmVkIiwiaW5hY3Rpdml0eVRpbWVvdXQiLCJhZGRTdGFyTGF5ZXIiLCJ1cGRhdGVTZXR0aW5ncyIsInJlbW92ZVN0YXJMYXllciIsInNob3dIaWRlT3ZlcmxheUNsaWNrZWQiLCJzZW5kZXIiLCJ2aXNpYmxlIiwic2V0U3RhdGUiLCJiZWZvcmVWaXNpYmxlIiwibW91c2VJbmFjdGl2aXR5SGFuZGxlciIsInNldFRpbWVvdXQiLCJzaG93T3ZlckxheWVyQnV0dG9uIiwic2V0dGluZ3NMaXN0IiwiYnRuMSIsImFwcF9BcHAiLCJzZXR0aW5ncyIsIm9uQWRkU3RhckxheWVyIiwib25SZW1vdmVTdGFyTGF5ZXIiLCJsYXllciIsInN0YXJMYXllcnMiLCJidG5Gb3JMYXllciIsInRhZyIsImJ0bkZvck5ld0xheWVyIiwic3RhckxheWVyQW5pbWF0b3JfU3RhckxheWVyQW5pbWF0b3IiLCJ1cGRhdGUiLCJzcGVlZCIsImluc3BpZXJ0eVBsYXllclZpZXdfSW5zcGllcnR5UGxheWVyVmlldyIsInN0YXJBbmltYXRvcnMiLCJhbmltYXRvciIsImFuaW0iLCJzZXR0aW5nc092ZXJsYXkiLCJTdGFyTGF5ZXIiLCJyYW5kb20iLCJydW4iLCJiYWNrZ3JvdW5kQ29sb3IiLCJpbm5lcldpZHRoIiwiaW5uZXJIZWlnaHQiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEVBQUEsR0FHQSxTQUFBQyxFQUFBQyxHQUdBLEdBQUFGLEVBQUFFLEdBQ0EsT0FBQUYsRUFBQUUsR0FBQUMsUUFHQSxJQUFBQyxFQUFBSixFQUFBRSxHQUFBLENBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsUUFBQSxJQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxFQUFBLENBQTBDSyxZQUFBLEVBQUFDLElBQUFMLEtBSzFDWixFQUFBa0IsRUFBQSxTQUFBaEIsR0FDQSxvQkFBQWlCLGVBQUFDLGFB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LE1BSS9Cak0sS0FBS29MLFdBQVdsSyxLQUFLOEYsR0FDckJoSCxLQUFLaUwsZUFBZXhELGNBQWNULEtBRy9CaEgsS0FBQW9LLGdCQUFrQixDQUFDcEQsSUFDdEJoSCxLQUFLb0wsV0FBVzFLLFdBQVdzRyxHQUMzQmhILEtBQUtrTCxrQkFBa0J6RCxjQUFjVCxPRHZCSGxFLE9BQU9zSixXQUFZdEosT0FBT3VKLGtCRUZwRWpLLFNBQVNXLGlCQUFpQixtQkFFMUIsWUFDYyxJQUFJZ0ksR0FDVm1CLFFBSjRDIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMSk7XG4iLCJpbnRlcmZhY2UgQXJyYXk8VD4ge1xuICAgIHJlbW92ZUl0ZW1JZkV4aXN0cyhpdGVtOiBUKTogdm9pZDtcbiAgICBjb250YWlucyhpdGVtOiBUKTogYm9vbGVhbjtcbiAgICByZW1vdmVJdGVtKGl0ZW06IFQpOiB2b2lkO1xuICAgIHJlbW92ZShzZWxlY3RvcjogKGl0ZW06IFQpID0+IGJvb2xlYW4pOiB2b2lkO1xuICAgIGFkZEl0ZW1JZk5vdEV4aXN0cyhpdGVtOiBUKTogdm9pZDtcbiAgICB0b0xpc3QoKTogVFtdO1xuICAgIGdldE5leHQoY3VycmVudDogVCwgc2VsZWN0b3I6IChpdGVtOiBUKSA9PiBudW1iZXIpOiBUO1xuICAgIGZpcnN0KHNlbGVjdG9yOiAoaXRlbTogVCkgPT4gYm9vbGVhbik6IFQ7XG4gICAgZmlyc3RPckRlZmF1bHQoc2VsZWN0b3I6IChpdGVtOiBUKSA9PiBib29sZWFuKTogVDtcbn1cblxuQXJyYXkucHJvdG90eXBlLmZpcnN0T3JEZWZhdWx0ID0gZnVuY3Rpb24gKGZ1bmMpIHtcbiAgICBmb3IgKGNvbnN0IGFycmF5SXRlbSBvZiB0aGlzKSB7XG4gICAgICAgIGlmIChmdW5jKGFycmF5SXRlbSkpIHtcbiAgICAgICAgICAgIHJldHVybiBhcnJheUl0ZW07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5cbkFycmF5LnByb3RvdHlwZS5maXJzdCA9IGZ1bmN0aW9uIChmdW5jKSB7XG4gICAgZm9yIChjb25zdCBhcnJheUl0ZW0gb2YgdGhpcykge1xuICAgICAgICBpZiAoZnVuYyhhcnJheUl0ZW0pKSB7XG4gICAgICAgICAgICByZXR1cm4gYXJyYXlJdGVtO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKFwiaXRlbSBub3QgZm91bmRcIik7XG4gICAgY29uc29sZS5sb2codGhpcyk7XG4gICAgdGhyb3cgXCJpdGVtIG5vdCBmb3VuZFwiO1xufVxuXG5BcnJheS5wcm90b3R5cGUuZ2V0TmV4dCA9IGZ1bmN0aW9uIDxUPihjdXJyZW50OiBULCBzZWxlY3RvcjogKGl0ZW06IFQpID0+IG51bWJlcik6IFQge1xuICAgIHZhciBuZXh0UG9zaXRpb24gPSBzZWxlY3RvcihjdXJyZW50KSArIDE7XG4gICAgdmFyIG5leHQgPSAodGhpcyBhcyBUW10pLmZpcnN0T3JEZWZhdWx0KCh4KSA9PiBzZWxlY3Rvcih4KSA9PSBuZXh0UG9zaXRpb24pO1xuICAgIGlmICghbmV4dCkge1xuICAgICAgICBuZXh0ID0gKHRoaXMgYXMgVFtdKS5maXJzdCh4ID0+IHNlbGVjdG9yKHgpID09IDEpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXh0O1xufVxuXG5BcnJheS5wcm90b3R5cGUucmVtb3ZlSXRlbSA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleE9mKGl0ZW0pO1xuICAgIGlmIChpbmRleCAhPSAtMSkge1xuICAgICAgICB0aGlzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgXCJpdGVtIG5vdCBmb3VuZFwiO1xuICAgIH1cbn1cblxuQXJyYXkucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gPFQ+KGl0ZW06IFQpIHtcbiAgICByZXR1cm4gdGhpcy5pbmRleE9mKGl0ZW0pICE9PSAtMTtcbn1cblxuQXJyYXkucHJvdG90eXBlLnJlbW92ZUl0ZW1JZkV4aXN0cyA9IGZ1bmN0aW9uIDxUPihpdGVtOiBUKSB7XG4gICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleE9mKGl0ZW0pO1xuICAgIGlmIChpbmRleCAhPSAtMSkge1xuICAgICAgICB0aGlzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxufVxuXG5BcnJheS5wcm90b3R5cGUuYWRkSXRlbUlmTm90RXhpc3RzID0gZnVuY3Rpb24gPFQ+KGl0ZW06IFQpIHtcbiAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4T2YoaXRlbSk7XG4gICAgaWYgKGluZGV4ID09IC0xKSB7XG4gICAgICAgICh0aGlzIGFzIFRbXSkucHVzaChpdGVtKTtcbiAgICB9XG59XG5cbkFycmF5LnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiA8VD4oc2VsZWN0b3I6IChpdGVtOiBUKSA9PiBib29sZWFuKSB7XG4gICAgKHRoaXMgYXMgVFtdKS5yZW1vdmVJdGVtKCh0aGlzIGFzIFRbXSkuZmlyc3Qoc2VsZWN0b3IpKTtcbn1cblxuQXJyYXkucHJvdG90eXBlLnRvTGlzdCA9IGZ1bmN0aW9uIDxUPigpOiBUW10ge1xuICAgIHJldHVybiAodGhpcyBhcyBUW10pLmZpbHRlcih4ID0+IHRydWUpO1xufVxuIiwiaW1wb3J0IHsgRUFuaW1hdGlvbiB9IGZyb20gXCIuLi9lQW5pbWF0aW9uXCI7XG5cbmV4cG9ydCB0eXBlIERyYXdGdW5jdGlvbiA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgd2lkdGg/OiBudW1iZXIsIGhlaWdodD86IG51bWJlcikgPT4gdm9pZDtcblxuZXhwb3J0IGNsYXNzIEVDYW52YXMge1xuICAgIHByaXZhdGUgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcbiAgICBwcml2YXRlIGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO1xuXG4gICAgcHJpdmF0ZSBkcmF3RnVuY3Rpb25zOiBEcmF3RnVuY3Rpb25bXSA9IFtdO1xuXG4gICAgcHVibGljIGdldCB3aWR0aCgpOiBudW1iZXIge1xuICAgICAgICByZXR1cm4gdGhpcy5jYW52YXMud2lkdGg7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCBoZWlnaHQoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FudmFzLmhlaWdodDtcbiAgICB9XG5cbiAgICBwcml2YXRlIGNvbnN0cnVjdG9yKCkgeyB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZUZ1bGxTY3JlZW4oKTogRUNhbnZhcyB7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucGFyZW50RWxlbWVudC5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5tYXJnaW4gPSBcIjBcIjtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9IFwiaGlkZGVuXCI7XG5cbiAgICAgICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNhbnZhcyk7XG4gICAgICAgIGNhbnZhcy5zdHlsZS53aWR0aCA9IFwiMTAwJVwiXG4gICAgICAgIGNhbnZhcy5zdHlsZS5oZWlnaHQgPSBcIjEwMCVcIjtcblxuICAgICAgICB2YXIgZW5DYW52YXMgPSBuZXcgRUNhbnZhcygpO1xuICAgICAgICBlbkNhbnZhcy5jYW52YXMgPSBjYW52YXM7XG4gICAgICAgIGVuQ2FudmFzLmN0eCA9IGNhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCBlbkNhbnZhcy5yZXNpemUpO1xuICAgICAgICBlbkNhbnZhcy5yZXNpemUoKTtcbiAgICAgICAgcmV0dXJuIGVuQ2FudmFzO1xuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGN1cnNvckxvY2s6IHN0cmluZyA9IG51bGw7XG5cbiAgICBwdWJsaWMgc3RhdGljIFNldEN1cnNvciA9IChuYW1lOiBzdHJpbmcsIHBvaW50ZXI6IGJvb2xlYW4pID0+IHtcbiAgICAgICAgaWYgKHBvaW50ZXIpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUuY3Vyc29yID0gXCJwb2ludGVyXCI7XG4gICAgICAgICAgICBFQ2FudmFzLmN1cnNvckxvY2sgPSBuYW1lO1xuICAgICAgICB9IGVsc2UgaWYgKG5hbWUgPT0gRUNhbnZhcy5jdXJzb3JMb2NrKSB7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLmN1cnNvciA9IFwiZGVmYXVsdFwiO1xuICAgICAgICAgICAgRUNhbnZhcy5jdXJzb3JMb2NrID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyByZXNpemUgPSAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiY2FudmFzLnJlc2l6ZSgpXCIpO1xuICAgICAgICB0aGlzLmNhbnZhcy53aWR0aCA9IHRoaXMuY2FudmFzLmNsaWVudFdpZHRoO1xuICAgICAgICB0aGlzLmNhbnZhcy5oZWlnaHQgPSB0aGlzLmNhbnZhcy5jbGllbnRIZWlnaHQ7XG4gICAgfVxuXG4gICAgcHVibGljIGRyYXcgPSAoKSA9PiB7XG4gICAgICAgIGZvciAoY29uc3QgZHJhd0Z1bmN0aW9uIG9mIHRoaXMuZHJhd0Z1bmN0aW9ucykge1xuICAgICAgICAgICAgZHJhd0Z1bmN0aW9uKHRoaXMuY3R4LCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkRHJhd0Z1bmN0aW9uID0gKGZ1bmM6IERyYXdGdW5jdGlvbikgPT4ge1xuICAgICAgICB0aGlzLmRyYXdGdW5jdGlvbnMucHVzaChmdW5jKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlRHJhd0Z1bmN0aW9uID0gKGZ1bmM6IERyYXdGdW5jdGlvbikgPT4ge1xuICAgICAgICB0aGlzLmRyYXdGdW5jdGlvbnMuc3BsaWNlKHRoaXMuZHJhd0Z1bmN0aW9ucy5pbmRleE9mKGZ1bmMpLCAxKTtcbiAgICB9XG59IiwiZXhwb3J0IGNsYXNzIFJlY3RhbmdsZSB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHg6IG51bWJlciwgcHVibGljIHk6IG51bWJlciwgcHVibGljIHdpZHRoOiBudW1iZXIsIHB1YmxpYyBoZWlnaHQ6IG51bWJlcikgeyB9XG5cbiAgICBwdWJsaWMgY29sbGlkZXNXaXRoID0gKHJlY3RhbmdsZTogUmVjdGFuZ2xlKSA9PiB7XG4gICAgICAgIHZhciBoaXR4ID0gZmFsc2U7XG4gICAgICAgIHZhciBoaXR5ID0gZmFsc2U7XG4gICAgICAgIGlmICh0aGlzLnggPD0gcmVjdGFuZ2xlLngpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLnggPD0gcmVjdGFuZ2xlLnggJiYgdGhpcy54ICsgdGhpcy53aWR0aCA+IHJlY3RhbmdsZS54KSB7XG4gICAgICAgICAgICAgICAgaGl0eCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAocmVjdGFuZ2xlLnggPD0gdGhpcy54ICYmIHJlY3RhbmdsZS54ICsgcmVjdGFuZ2xlLndpZHRoID4gdGhpcy54KSB7XG4gICAgICAgICAgICAgICAgaGl0eCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaGl0eCkge1xuICAgICAgICAgICAgaWYgKHRoaXMueSA8PSByZWN0YW5nbGUueSkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnkgPD0gcmVjdGFuZ2xlLnkgJiYgdGhpcy55ICsgdGhpcy53aWR0aCA+IHJlY3RhbmdsZS55KSB7XG4gICAgICAgICAgICAgICAgICAgIGhpdHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlY3RhbmdsZS55IDw9IHRoaXMueSAmJiByZWN0YW5nbGUueSArIHJlY3RhbmdsZS53aWR0aCA+IHRoaXMueSkge1xuICAgICAgICAgICAgICAgICAgICBoaXR5ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gaGl0eCAmJiBoaXR5O1xuICAgIH1cblxuICAgIHB1YmxpYyBpc0hpdEJ5ID0gKHg6IG51bWJlciwgeTogbnVtYmVyKSA9PiB7XG4gICAgICAgIHJldHVybiB4ID4gdGhpcy54ICYmIHggPCB0aGlzLnggKyB0aGlzLndpZHRoXG4gICAgICAgICAgICAmJiB5ID4gdGhpcy55ICYmIHkgPCB0aGlzLnkgKyB0aGlzLmhlaWdodDtcbiAgICB9XG59IiwiZXhwb3J0IHR5cGUgVXBkYXRlRnVuY3Rpb24gPSAodGltZURpZmY6IG51bWJlcikgPT4gdm9pZDtcblxuZXhwb3J0IGNsYXNzIEVBbmltYXRpb24ge1xuICAgIHByaXZhdGUgdXBkYXRlRnVuY3Rpb25zOiBVcGRhdGVGdW5jdGlvbltdID0gW107XG4gICAgcHJpdmF0ZSBpc1J1bm5pbmcgPSBmYWxzZTtcbiAgICBwcml2YXRlIGxhc3RGcmFtZVRpbWU6IG51bWJlcjtcbiAgICBwcml2YXRlIGZwczogbnVtYmVyO1xuICAgIHByaXZhdGUgZnBzSW50ZXJ2YWw6IG51bWJlcjtcblxuICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zZXRGcHMoMzApO1xuICAgICAgICB0aGlzLnBsYXkoKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldmVudC5rZXlDb2RlID09IDgwKSB7IC8vIHBcbiAgICAgICAgICAgICAgICB0aGlzLnBsYXlQYXVzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcGxheSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzUnVubmluZykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJwbGF5XCIpO1xuICAgICAgICAgICAgdGhpcy5pc1J1bm5pbmcgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5sYXN0RnJhbWVUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIHRoaXMuYW5pbWF0aW9uTG9vcCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHBhdXNlKCkge1xuICAgICAgICBpZiAodGhpcy5pc1J1bm5pbmcpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwicGF1c2VcIik7XG4gICAgICAgICAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHBsYXlQYXVzZSgpIHtcbiAgICAgICAgdGhpcy5pc1J1bm5pbmcgPyB0aGlzLnBhdXNlKCkgOiB0aGlzLnBsYXkoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkVXBkYXRlRnVuY3Rpb24gPSAoZnVuYzogVXBkYXRlRnVuY3Rpb24pID0+IHtcbiAgICAgICAgdGhpcy51cGRhdGVGdW5jdGlvbnMucHVzaChmdW5jKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlVXBkYXRlRnVuY3Rpb24gPSAoZnVuYzogVXBkYXRlRnVuY3Rpb24pID0+IHtcbiAgICAgICAgdGhpcy51cGRhdGVGdW5jdGlvbnMuc3BsaWNlKHRoaXMudXBkYXRlRnVuY3Rpb25zLmluZGV4T2YoZnVuYyksIDEpO1xuICAgIH1cblxuICAgIHB1YmxpYyBzZXRGcHMgPSAoZnBzOiBudW1iZXIpID0+IHtcbiAgICAgICAgdGhpcy5mcHMgPSBmcHM7XG4gICAgICAgIHRoaXMuZnBzSW50ZXJ2YWwgPSAxMDAwIC8gdGhpcy5mcHM7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBhbmltYXRpb25Mb29wID0gKCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5pc1J1bm5pbmcpIHtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLmFuaW1hdGlvbkxvb3ApO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIHZhciBlbGFwc2VkID0gbm93IC0gdGhpcy5sYXN0RnJhbWVUaW1lO1xuXG4gICAgICAgIGlmIChlbGFwc2VkID4gdGhpcy5mcHNJbnRlcnZhbCkge1xuICAgICAgICAgICAgdGhpcy5sYXN0RnJhbWVUaW1lID0gbm93O1xuICAgICAgICAgICAgdmFyIHRpbWVEaWZmID0gZWxhcHNlZCAvIDEwMDA7XG5cbiAgICAgICAgICAgIGZvciAoY29uc3QgdXBkYXRlRnVuY3Rpb24gb2YgdGhpcy51cGRhdGVGdW5jdGlvbnMpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVGdW5jdGlvbih0aW1lRGlmZik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IHsgRUNhbnZhcyB9IGZyb20gXCIuL2VDYW52YXNcIjtcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gXCIuLi9nZW9tZXRyeS9yZWN0YW5nbGVcIjtcbmltcG9ydCB7IExheW91dFZpZXcgfSBmcm9tIFwiLi9sYXlvdXRDb250cm9scy9sYXlvdXRWaWV3XCI7XG5pbXBvcnQgeyBFQW5pbWF0aW9uIH0gZnJvbSBcIi4uL2VBbmltYXRpb25cIjtcblxuZXhwb3J0IGNsYXNzIFN0YWdlIHtcbiAgICBwcml2YXRlIHZpZXc6IExheW91dFZpZXc7XG4gICAgcHJpdmF0ZSBzaG91bGRVcGRhdGVMYXlvdXQ6IGJvb2xlYW47XG5cbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNhbnZhczogRUNhbnZhcykge1xuICAgICAgICBjYW52YXMuYWRkRHJhd0Z1bmN0aW9uKHRoaXMucmVuZGVyKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlbW92ZVwiLCB0aGlzLm1vdXNlTW92ZSk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmNsaWNrKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgc3RhdGljIGNyZWF0ZSgpOiBTdGFnZSB7XG4gICAgICAgIHZhciBjYW52YXMgPSBFQ2FudmFzLmNyZWF0ZUZ1bGxTY3JlZW4oKTtcbiAgICAgICAgdmFyIHN0YWdlID0gbmV3IFN0YWdlKGNhbnZhcyk7XG4gICAgICAgIHZhciBhbmltYXRpb24gPSBuZXcgRUFuaW1hdGlvbigpO1xuICAgICAgICBhbmltYXRpb24uYWRkVXBkYXRlRnVuY3Rpb24oY2FudmFzLmRyYXcpO1xuICAgICAgICByZXR1cm4gc3RhZ2U7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBtb3VzZU1vdmUgPSAoZXY6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgdGhpcy52aWV3Lm1vdXNlTW92ZShldik7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjbGljayA9IChldjogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICBpZiAodGhpcy52aWV3KSB7XG4gICAgICAgICAgICB0aGlzLnZpZXcuY2xpY2soZXYpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHJpdmF0ZSByZW5kZXIgPSAoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIHdpZHRoPzogbnVtYmVyLCBoZWlnaHQ/OiBudW1iZXIpID0+IHtcbiAgICAgICAgaWYgKHRoaXMudmlldykge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2hvdWxkVXBkYXRlTGF5b3V0KSB7XG4gICAgICAgICAgICAgICAgdGhpcy52aWV3LnVwZGF0ZUxheW91dChjdHgsIG5ldyBSZWN0YW5nbGUoMCwgMCwgd2lkdGgsIGhlaWdodCkpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvdWxkVXBkYXRlTGF5b3V0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdHguY2xlYXJSZWN0KDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgdGhpcy52aWV3LnJlbmRlcihjdHgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIHNldFZpZXcgPSAodmlldzogTGF5b3V0VmlldykgPT4ge1xuICAgICAgICB0aGlzLnZpZXcgPSB2aWV3O1xuICAgICAgICB0aGlzLnNob3VsZFVwZGF0ZUxheW91dCA9IHRydWU7XG4gICAgfVxufSIsImltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gXCIuLi9nZW9tZXRyeS9yZWN0YW5nbGVcIjtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFJlbmRlck9iamVjdCB7XG4gICAgcHJpdmF0ZSBzdGF0aWMgaWRDb3VudGVyID0gMDtcbiAgICBwcml2YXRlIGdlbmVyYXRlTmV3SWQgPSAoKSA9PiB7XG4gICAgICAgIFJlbmRlck9iamVjdC5pZENvdW50ZXIrKztcbiAgICAgICAgcmV0dXJuIFJlbmRlck9iamVjdC5pZENvdW50ZXI7XG4gICAgfVxuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuaWQgPSB0aGlzLmdlbmVyYXRlTmV3SWQoKTtcbiAgICAgICAgdGhpcy5uYW1lID0gXCJvYmplY3QgXCIgKyB0aGlzLmlkO1xuICAgIH1cblxuICAgIHB1YmxpYyBpZDogbnVtYmVyO1xuICAgIHB1YmxpYyBuYW1lOiBzdHJpbmc7XG4gICAgcHVibGljIHRhZzogYW55O1xuXG4gICAgcHVibGljIGJvdW5kczogUmVjdGFuZ2xlID0gbmV3IFJlY3RhbmdsZSgwLCAwLCAwLCAwKTtcbiAgICBwdWJsaWMgYWJzdHJhY3QgcmVuZGVyKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKTogdm9pZDtcblxuICAgIGFic3RyYWN0IG1vdXNlTW92ZShldjogTW91c2VFdmVudCk6IHZvaWQ7XG4gICAgYWJzdHJhY3QgY2xpY2soZXY6IE1vdXNlRXZlbnQpOiB2b2lkO1xufSIsImltcG9ydCB7IFJlbmRlck9iamVjdCB9IGZyb20gXCIuLi9yZW5kZXJPYmplY3RcIjtcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9yZWN0YW5nbGVcIjtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIExheW91dFZpZXcgZXh0ZW5kcyBSZW5kZXJPYmplY3Qge1xuICAgIHByb3RlY3RlZCBjaGlsZHJlbjogUmVuZGVyT2JqZWN0W10gPSBbXTtcbiAgICBwcml2YXRlIHNob3VsZFVwZGF0ZUxheW91dCA9IGZhbHNlO1xuXG4gICAgcHVibGljIHJlbmRlcihjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCkge1xuICAgICAgICBpZiAodGhpcy5zaG91bGRVcGRhdGVMYXlvdXQpIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlTGF5b3V0KGN0eCwgdGhpcy5ib3VuZHMpO1xuICAgICAgICAgICAgdGhpcy5zaG91bGRVcGRhdGVMYXlvdXQgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIHRoaXMuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGNoaWxkLnJlbmRlcihjdHgpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHB1YmxpYyBhYnN0cmFjdCB1cGRhdGVMYXlvdXQoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGJvdW5kczogUmVjdGFuZ2xlKTogdm9pZDtcblxuICAgIHB1YmxpYyB0cmlnZ2VyVXBkYXRlTGF5b3V0ID0gKCkgPT4ge1xuICAgICAgICB0aGlzLnNob3VsZFVwZGF0ZUxheW91dCA9IHRydWU7XG4gICAgfVxuXG4gICAgcHVibGljIG1vdXNlTW92ZShldjogTW91c2VFdmVudCkge1xuICAgICAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIHRoaXMuY2hpbGRyZW4pIHtcbiAgICAgICAgICAgIGNoaWxkLm1vdXNlTW92ZShldik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgY2xpY2soZXY6IE1vdXNlRXZlbnQpIHtcbiAgICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiB0aGlzLmNoaWxkcmVuLnRvTGlzdCgpKSB7XG4gICAgICAgICAgICBjaGlsZC5jbGljayhldik7XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IHsgUmVuZGVyT2JqZWN0IH0gZnJvbSBcIi4uL2VuYy9zcmMvdWkvcmVuZGVyT2JqZWN0XCI7XHJcbmltcG9ydCB7IFN0YXIgfSBmcm9tIFwiLi9tb2RlbHMvc3RhclwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFN0YXJSZW5kZXJPYmplY3QgZXh0ZW5kcyBSZW5kZXJPYmplY3Qge1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgc3RhcjogU3Rhcikge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbmRlcihjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCk6IHZvaWQge1xyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKFwiZHJhd2luZ1wiKTtcclxuICAgICAgICBcclxuICAgICAgICBjdHguZmlsbFN0eWxlID0gXCJ3aGl0ZVwiO1xyXG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgICAgICBjdHguYXJjKHRoaXMuc3Rhci54LCB0aGlzLnN0YXIueSwgdGhpcy5zdGFyLnIsIDAsIE1hdGguUEkgKiAyKTtcclxuICAgICAgICBjdHguZmlsbCgpO1xyXG4gICAgfVxyXG4gICAgbW91c2VNb3ZlKGV2OiBNb3VzZUV2ZW50KTogdm9pZCB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTWV0aG9kIG5vdCBpbXBsZW1lbnRlZC5cIik7XHJcbiAgICB9XHJcbiAgICBjbGljayhldjogTW91c2VFdmVudCk6IHZvaWQge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIk1ldGhvZCBub3QgaW1wbGVtZW50ZWQuXCIpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgUmVuZGVyT2JqZWN0IH0gZnJvbSBcIi4uL2VuYy9zcmMvdWkvcmVuZGVyT2JqZWN0XCI7XHJcbmltcG9ydCB7IExheW91dFZpZXcgfSBmcm9tIFwiLi4vZW5jL3NyYy91aS9sYXlvdXRDb250cm9scy9sYXlvdXRWaWV3XCI7XHJcbmltcG9ydCB7IFN0YXJSZW5kZXJPYmplY3QgfSBmcm9tIFwiLi9zdGFyUmVuZGVyT2JqZWN0XCI7XHJcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gXCIuLi9lbmMvc3JjL2dlb21ldHJ5L3JlY3RhbmdsZVwiO1xyXG5pbXBvcnQgeyBTdGFyTGF5ZXIgfSBmcm9tIFwiLi9tb2RlbHMvc3RhckxheWVyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU3RhckxheWVyRHJhd2VyIGV4dGVuZHMgTGF5b3V0VmlldyB7XHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgc3RhckxheWVyOiBTdGFyTGF5ZXIpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMudHJpZ2dlclVwZGF0ZUxheW91dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVMYXlvdXQoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGJvdW5kczogUmVjdGFuZ2xlKTogdm9pZCB7XHJcbiAgICAgICAgZm9yIChjb25zdCBzdGFyIG9mIHRoaXMuc3RhckxheWVyLnN0YXJzKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaChuZXcgU3RhclJlbmRlck9iamVjdChzdGFyKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuXHJcbiAgICBwdWJsaWMgbW91c2VNb3ZlKGV2OiBNb3VzZUV2ZW50KSB7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsaWNrKGV2OiBNb3VzZUV2ZW50KSB7XHJcbiAgICB9XHJcbn0iLCJleHBvcnQgZW51bSBTZXR0aW5nc092ZXJsYXlWaWV3TW9kZWxTdGF0ZSB7XHJcbiAgICBoaWRkZW4sXHJcbiAgICBiZWZvcmVWaXNpYmxlLFxyXG4gICAgdmlzaWJsZVxyXG59IiwiaW1wb3J0IHsgU2V0dGluZ3NPdmVybGF5Vmlld01vZGVsU3RhdGUgfSBmcm9tIFwiLi9zZXR0aW5nc092ZXJsYXlWaWV3TW9kZWxTdGF0ZVwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNldHRpbmdzT3ZlcmxheVZpZXdNb2RlbCB7XHJcbiAgICBwdWJsaWMgc3RhdGU6IFNldHRpbmdzT3ZlcmxheVZpZXdNb2RlbFN0YXRlID0gU2V0dGluZ3NPdmVybGF5Vmlld01vZGVsU3RhdGUuaGlkZGVuO1xyXG59IiwiZXhwb3J0IGNsYXNzIEVFdmVudCB7XG4gICAgcHJpdmF0ZSBsaXN0ZW5lcnM6ICgoKSA9PiB2b2lkKVtdID0gW107XG5cbiAgICBwdWJsaWMgYWRkRXZlbnRMaXN0ZW5lciA9IChsaXN0ZW5lcjogKCkgPT4gdm9pZCkgPT4ge1xuICAgICAgICAvLyB2YWxpZGF0aW9uXG4gICAgICAgIGlmICghbGlzdGVuZXIgfHwgdGhpcy5saXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcikgPj0gMCkge1xuICAgICAgICAgICAgdGhyb3cgXCJsaXN0ZW5lciBhbHJlYWR5IGFkZGVkXCI7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgYWRkRXZlbnRMaXN0ZW5lcklmTm90RXhpc3RzID0gKGxpc3RlbmVyOiAoKSA9PiB2b2lkKSA9PiB7XG4gICAgICAgIC8vIHZhbGlkYXRpb25cbiAgICAgICAgaWYgKCFsaXN0ZW5lciB8fCB0aGlzLmxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKSA+PSAwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZGlzcGF0Y2hFdmVudCA9ICgpID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZXZlbnQgPSB0aGlzLmxpc3RlbmVyc1tpXTtcbiAgICAgICAgICAgIGV2ZW50KCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlRXZlbnRMaXN0ZW5lciA9IChsaXN0ZW5lcjogKCkgPT4gdm9pZCkgPT4ge1xuICAgICAgICAvLyB2YWxpZGF0aW9uXG4gICAgICAgIGlmICghbGlzdGVuZXIgfHwgdGhpcy5saXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcikgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBcImxpc3RlbmVyIG5vdCBmb3VuZFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5saXN0ZW5lcnMuc3BsaWNlKHRoaXMubGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpLCAxKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlRXZlbnRMaXN0ZW5lcklmRXhpc3RzID0gKGxpc3RlbmVyOiAoKSA9PiB2b2lkKSA9PiB7XG4gICAgICAgIC8vIHZhbGlkYXRpb25cbiAgICAgICAgaWYgKCFsaXN0ZW5lciB8fCB0aGlzLmxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKSA8IDApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubGlzdGVuZXJzLnNwbGljZSh0aGlzLmxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKSwgMSk7XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgRUV2ZW50VDxUPiB7XG4gICAgcHJpdmF0ZSBsaXN0ZW5lcnM6ICgoYXJnOiBUKSA9PiB2b2lkKVtdID0gW107XG5cbiAgICBwdWJsaWMgYWRkRXZlbnRMaXN0ZW5lciA9IChsaXN0ZW5lcjogKGFyZzogVCkgPT4gdm9pZCkgPT4ge1xuICAgICAgICAvLyB2YWxpZGF0aW9uXG4gICAgICAgIGlmICghbGlzdGVuZXIgfHwgdGhpcy5saXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcikgPj0gMCkge1xuICAgICAgICAgICAgdGhyb3cgXCJsaXN0ZW5lciBhbHJlYWR5IGFkZGVkXCI7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmxpc3RlbmVycy5wdXNoKGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZGlzcGF0Y2hFdmVudCA9IChhcmc6IFQpID0+IHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxpc3RlbmVycy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgZXZlbnQgPSB0aGlzLmxpc3RlbmVyc1tpXTtcbiAgICAgICAgICAgIGV2ZW50KGFyZyk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlRXZlbnRMaXN0ZW5lciA9IChsaXN0ZW5lcjogKGFyZzogVCkgPT4gdm9pZCkgPT4ge1xuICAgICAgICAvLyB2YWxpZGF0aW9uXG4gICAgICAgIGlmICghbGlzdGVuZXIgfHwgdGhpcy5saXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcikgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBcImxpc3RlbmVyIG5vdCBmb3VuZFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5saXN0ZW5lcnMuc3BsaWNlKHRoaXMubGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpLCAxKTtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBFRXZlbnRUVDxUMSwgVDI+IHtcbiAgICBwcml2YXRlIGxpc3RlbmVyczogKChhcmcxOiBUMSwgYXJnMjogVDIpID0+IHZvaWQpW10gPSBbXTtcblxuICAgIHB1YmxpYyBhZGRFdmVudExpc3RlbmVyID0gKGxpc3RlbmVyOiAoYXJnMTogVDEsIGFyZzI6IFQyKSA9PiB2b2lkKSA9PiB7XG4gICAgICAgIC8vIHZhbGlkYXRpb25cbiAgICAgICAgaWYgKCFsaXN0ZW5lciB8fCB0aGlzLmxpc3RlbmVycy5pbmRleE9mKGxpc3RlbmVyKSA+PSAwKSB7XG4gICAgICAgICAgICB0aHJvdyBcImxpc3RlbmVyIGFscmVhZHkgYWRkZWRcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubGlzdGVuZXJzLnB1c2gobGlzdGVuZXIpO1xuICAgIH1cblxuICAgIHB1YmxpYyBkaXNwYXRjaEV2ZW50ID0gKGFyZzE6IFQxLCBhcmcyOiBUMikgPT4ge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGlzdGVuZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBldmVudCA9IHRoaXMubGlzdGVuZXJzW2ldO1xuICAgICAgICAgICAgZXZlbnQoYXJnMSwgYXJnMik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwdWJsaWMgcmVtb3ZlRXZlbnRMaXN0ZW5lciA9IChsaXN0ZW5lcjogKGFyZzE6IFQxLCBhcmcyOiBUMikgPT4gdm9pZCkgPT4ge1xuICAgICAgICAvLyB2YWxpZGF0aW9uXG4gICAgICAgIGlmICghbGlzdGVuZXIgfHwgdGhpcy5saXN0ZW5lcnMuaW5kZXhPZihsaXN0ZW5lcikgPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBcImxpc3RlbmVyIG5vdCBmb3VuZFwiO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5saXN0ZW5lcnMuc3BsaWNlKHRoaXMubGlzdGVuZXJzLmluZGV4T2YobGlzdGVuZXIpLCAxKTtcbiAgICB9XG59IiwiaW1wb3J0IHsgUmVuZGVyT2JqZWN0IH0gZnJvbSBcIi4uL3JlbmRlck9iamVjdFwiO1xuaW1wb3J0IHsgUG9pbnQgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvUG9pbnRcIjtcbmltcG9ydCB7IEVDYW52YXMgfSBmcm9tIFwiLi4vZUNhbnZhc1wiO1xuaW1wb3J0IHsgRUV2ZW50VCB9IGZyb20gXCIuLi8uLi9lRXZlbnRcIjtcblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIENvbnRyb2wgZXh0ZW5kcyBSZW5kZXJPYmplY3Qge1xuICAgIHByb3RlY3RlZCBpc01vdXNlT3ZlciA9IGZhbHNlO1xuICAgIHB1YmxpYyBpc0VuYWJsZWQgPSB0cnVlO1xuICAgIHB1YmxpYyBjbGlja2VkID0gbmV3IEVFdmVudFQ8Q29udHJvbD4oKTtcblxuICAgIHB1YmxpYyBhYnN0cmFjdCBhbGlnbihjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgcG9zaXRpb246IFBvaW50KTogdm9pZDtcblxuICAgIHB1YmxpYyBtb3VzZU1vdmUgPSAoZXY6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgICAgaWYgKHRoaXMuaXNFbmFibGVkKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5ib3VuZHMuaXNIaXRCeShldi5jbGllbnRYLCBldi5jbGllbnRZKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNNb3VzZU92ZXIgPSB0cnVlO1xuICAgICAgICAgICAgICAgIEVDYW52YXMuU2V0Q3Vyc29yKHRoaXMubmFtZSwgdHJ1ZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuaXNNb3VzZU92ZXIgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBFQ2FudmFzLlNldEN1cnNvcih0aGlzLm5hbWUsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBjbGljayA9IChldjogTW91c2VFdmVudCkgPT4ge1xuICAgICAgICBpZiAodGhpcy5pc0VuYWJsZWQpIHtcbiAgICAgICAgICAgIGlmICh0aGlzLmJvdW5kcy5pc0hpdEJ5KGV2LmNsaWVudFgsIGV2LmNsaWVudFkpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jbGlja2VkLmRpc3BhdGNoRXZlbnQodGhpcyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59IiwiZXhwb3J0IGNsYXNzIEJ1dHRvblByb3BlcnRpZXMge1xyXG4gICAgcHVibGljIGZvbnRTaXplID0gNDA7XHJcbiAgICBwdWJsaWMgZmlsbFN0eWxlID0gXCJibGFja1wiO1xyXG4gICAgcHVibGljIG1vdXNlT3ZlckZpbGxTdHlsZSA9IFwicmVkXCI7XHJcbiAgICBwdWJsaWMgYmFja2dyb3VuZEZpbGxTdHlsZTogc3RyaW5nID0gdW5kZWZpbmVkO1xyXG59IiwiaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L3JlY3RhbmdsZVwiO1xuaW1wb3J0IHsgQ29udHJvbCB9IGZyb20gXCIuL2NvbnRyb2xcIjtcbmltcG9ydCB7IFBvaW50IH0gZnJvbSBcIi4uLy4uL2dlb21ldHJ5L1BvaW50XCI7XG5pbXBvcnQgeyBCdXR0b25Qcm9wZXJ0aWVzIH0gZnJvbSBcIi4vcHJpbWl0aXZlcy9idXR0b25Qcm9wZXJ0aWVzXCI7XG5cbmV4cG9ydCBjbGFzcyBCdXR0b24gZXh0ZW5kcyBDb250cm9sIHtcbiAgICBwdWJsaWMgcHJvcGVydGllcyA9IG5ldyBCdXR0b25Qcm9wZXJ0aWVzKCk7XG4gICAgcHVibGljIHRleHQ6IHN0cmluZztcbiAgICBwdWJsaWMgaXNWaXNpYmxlID0gdHJ1ZTtcblxuICAgIHB1YmxpYyBob3Jpem9udGFsQWxpZ246IFwibGVmdFwiIHwgXCJjZW50ZXJcIiB8IFwicmlnaHRcIiA9IFwiY2VudGVyXCI7XG4gICAgcHVibGljIHZlcnRpY2FsQWxpZ246IFwidG9wXCIgfCBcImNlbnRlclwiIHwgXCJib3R0b21cIiA9IFwiY2VudGVyXCI7XG5cbiAgICBwdWJsaWMgcmVuZGVyID0gKGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEKSA9PiB7XG4gICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMucHJvcGVydGllcy5iYWNrZ3JvdW5kRmlsbFN0eWxlKSB7XG4gICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHRoaXMucHJvcGVydGllcy5iYWNrZ3JvdW5kRmlsbFN0eWxlO1xuICAgICAgICAgICAgICAgIGN0eC5maWxsUmVjdCh0aGlzLmJvdW5kcy54LCB0aGlzLmJvdW5kcy55LCB0aGlzLmJvdW5kcy53aWR0aCwgdGhpcy5ib3VuZHMuaGVpZ2h0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHRoaXMuaXNNb3VzZU92ZXIpIHtcbiAgICAgICAgICAgICAgICBjdHguZmlsbFN0eWxlID0gdGhpcy5wcm9wZXJ0aWVzLm1vdXNlT3ZlckZpbGxTdHlsZTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IHRoaXMucHJvcGVydGllcy5maWxsU3R5bGU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGN0eC5mb250ID0gdGhpcy5wcm9wZXJ0aWVzLmZvbnRTaXplICsgXCJweCBBcmlhbFwiO1xuICAgICAgICAgICAgY3R4LnRleHRBbGlnbiA9IFwibGVmdFwiO1xuICAgICAgICAgICAgY3R4LnRleHRCYXNlbGluZSA9IFwidG9wXCI7XG4gICAgICAgICAgICBjdHguZmlsbFRleHQodGhpcy50ZXh0LCB0aGlzLmJvdW5kcy54LCB0aGlzLmJvdW5kcy55KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHB1YmxpYyBhbGlnbiA9IChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgcG9zaXRpb246IFBvaW50KSA9PiB7XG4gICAgICAgIGN0eC5mb250ID0gdGhpcy5wcm9wZXJ0aWVzLmZvbnRTaXplICsgXCJweCBBcmlhbFwiO1xuICAgICAgICBjdHgudGV4dEFsaWduID0gXCJsZWZ0XCI7XG4gICAgICAgIGN0eC50ZXh0QmFzZWxpbmUgPSBcInRvcFwiO1xuICAgICAgICB2YXIgc2l6ZSA9IGN0eC5tZWFzdXJlVGV4dCh0aGlzLnRleHQpO1xuXG4gICAgICAgIHZhciBib3VuZHMgPSBuZXcgUmVjdGFuZ2xlKDAsIDAsIHNpemUud2lkdGgsIHRoaXMucHJvcGVydGllcy5mb250U2l6ZSk7XG5cbiAgICAgICAgc3dpdGNoICh0aGlzLmhvcml6b250YWxBbGlnbikge1xuICAgICAgICAgICAgY2FzZSBcImxlZnRcIjpcbiAgICAgICAgICAgICAgICBib3VuZHMueCA9IHBvc2l0aW9uLng7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiY2VudGVyXCI6XG4gICAgICAgICAgICAgICAgYm91bmRzLnggPSBwb3NpdGlvbi54IC0gc2l6ZS53aWR0aCAvIDI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwicmlnaHRcIjpcbiAgICAgICAgICAgICAgICBib3VuZHMueCA9IHBvc2l0aW9uLnggLSBzaXplLndpZHRoO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHN3aXRjaCAodGhpcy52ZXJ0aWNhbEFsaWduKSB7XG4gICAgICAgICAgICBjYXNlIFwidG9wXCI6XG4gICAgICAgICAgICAgICAgYm91bmRzLnkgPSBwb3NpdGlvbi55O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSBcImNlbnRlclwiOlxuICAgICAgICAgICAgICAgIGJvdW5kcy55ID0gcG9zaXRpb24ueSAtIHRoaXMucHJvcGVydGllcy5mb250U2l6ZSAvIDI7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFwiYm90dG9tXCI6XG4gICAgICAgICAgICAgICAgYm91bmRzLnkgPSBwb3NpdGlvbi55IC0gdGhpcy5wcm9wZXJ0aWVzLmZvbnRTaXplO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuYm91bmRzID0gYm91bmRzO1xuICAgIH1cbn0iLCJleHBvcnQgY2xhc3MgUG9pbnQge1xuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyB4OiBudW1iZXIsIHB1YmxpYyB5OiBudW1iZXIpIHsgfVxufSIsImV4cG9ydCBjbGFzcyBQb2ludCB7XG4gICAgY29uc3RydWN0b3IocHVibGljIHg6IG51bWJlciwgcHVibGljIHk6IG51bWJlcikgeyB9XG59IiwiaW1wb3J0IHsgTGF5b3V0VmlldyB9IGZyb20gXCIuL2xheW91dFZpZXdcIjtcbmltcG9ydCB7IENvbnRyb2wgfSBmcm9tIFwiLi4vY29udHJvbHMvY29udHJvbFwiO1xuaW1wb3J0IHsgUG9pbnQgfSBmcm9tIFwiLi4vLi4vZ2VvbWV0cnkvUG9pbnRcIjtcbmltcG9ydCB7IFJlY3RhbmdsZSB9IGZyb20gXCIuLi8uLi9nZW9tZXRyeS9yZWN0YW5nbGVcIjtcblxuZXhwb3J0IGNsYXNzIExpc3RWaWV3IGV4dGVuZHMgTGF5b3V0VmlldyB7XG4gICAgcHVibGljIHNwYWNpbmcgPSAzMDtcblxuICAgIHB1YmxpYyBnZXQgaXRlbXMoKTogQ29udHJvbFtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hpbGRyZW4gYXMgQ29udHJvbFtdO1xuICAgIH1cbiAgICBwdWJsaWMgc2V0IGl0ZW1zKHY6IENvbnRyb2xbXSkge1xuICAgICAgICB0aGlzLmNoaWxkcmVuID0gdjtcbiAgICB9XG5cbiAgICBwdWJsaWMgdXBkYXRlTGF5b3V0KGN0eDogQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJELCBib3VuZHM6IFJlY3RhbmdsZSk6IHZvaWQge1xuICAgICAgICB2YXIgY291bnQgPSB0aGlzLml0ZW1zLmxlbmd0aDtcbiAgICAgICAgaWYgKGNvdW50ID4gMCkge1xuICAgICAgICAgICAgdmFyIHggPSBib3VuZHMud2lkdGggLyAyO1xuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgdmFyIHkgPSBib3VuZHMuaGVpZ2h0IC8gMiAtIHRoaXMuc3BhY2luZyAqIChjb3VudCAtIDEpIC8gMiArIGkgKiB0aGlzLnNwYWNpbmc7XG4gICAgICAgICAgICAgICAgdGhpcy5pdGVtc1tpXS5hbGlnbihjdHgsIG5ldyBQb2ludCh4LCB5KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59IiwiaW1wb3J0IHsgTGF5b3V0VmlldyB9IGZyb20gXCIuLi8uLi9lbmMvc3JjL3VpL2xheW91dENvbnRyb2xzL2xheW91dFZpZXdcIjtcclxuaW1wb3J0IHsgUmVjdGFuZ2xlIH0gZnJvbSBcIi4uLy4uL2VuYy9zcmMvZ2VvbWV0cnkvcmVjdGFuZ2xlXCI7XHJcbmltcG9ydCB7IFNldHRpbmdzT3ZlcmxheVZpZXdNb2RlbCB9IGZyb20gXCIuL3NldHRpbmdzT3ZlcmxheVZpZXdNb2RlbFwiO1xyXG5pbXBvcnQgeyBTZXR0aW5nc092ZXJsYXlWaWV3TW9kZWxTdGF0ZSB9IGZyb20gXCIuL3NldHRpbmdzT3ZlcmxheVZpZXdNb2RlbFN0YXRlXCI7XHJcbmltcG9ydCB7IEJ1dHRvbiB9IGZyb20gXCIuLi8uLi9lbmMvc3JjL3VpL2NvbnRyb2xzL2J1dHRvblwiO1xyXG5pbXBvcnQgeyBQb2ludCB9IGZyb20gXCIuLi8uLi9lbmMvc3JjL2dlb21ldHJ5L3BvaW50XCI7XHJcbmltcG9ydCB7IENvbnRyb2wgfSBmcm9tIFwiLi4vLi4vZW5jL3NyYy91aS9jb250cm9scy9jb250cm9sXCI7XHJcbmltcG9ydCB7IExpc3RWaWV3IH0gZnJvbSBcIi4uLy4uL2VuYy9zcmMvdWkvbGF5b3V0Q29udHJvbHMvbGlzdFZpZXdcIjtcclxuaW1wb3J0IHsgU3RhckxheWVyIH0gZnJvbSBcIi4uL21vZGVscy9zdGFyTGF5ZXJcIjtcclxuaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4uL2FwcFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNldHRpbmdzT3ZlcmxheVZpZXcgZXh0ZW5kcyBMYXlvdXRWaWV3IHtcclxuICAgIHByaXZhdGUgdmlld01vZGVsOiBTZXR0aW5nc092ZXJsYXlWaWV3TW9kZWwgPSBuZXcgU2V0dGluZ3NPdmVybGF5Vmlld01vZGVsKCk7XHJcbiAgICBwcml2YXRlIGxhc3RNb3ZlZCA9IERhdGUubm93KCk7XHJcbiAgICBwcml2YXRlIGluYWN0aXZpdHlUaW1lb3V0ID0gMjAwMDtcclxuICAgIHByaXZhdGUgc2hvd092ZXJMYXllckJ1dHRvbjogQnV0dG9uO1xyXG4gICAgcHJpdmF0ZSBzZXR0aW5nc0xpc3Q6IExpc3RWaWV3O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5zaG93T3ZlckxheWVyQnV0dG9uID0gbmV3IEJ1dHRvbigpO1xyXG4gICAgICAgIHRoaXMuc2hvd092ZXJMYXllckJ1dHRvbi50ZXh0ID0gXCJTaG93L0hpZGUgU2V0dGluZ3NcIjtcclxuICAgICAgICB0aGlzLnNob3dPdmVyTGF5ZXJCdXR0b24ucHJvcGVydGllcy5maWxsU3R5bGUgPSBcImdyZWVuXCI7XHJcbiAgICAgICAgdGhpcy5zaG93T3ZlckxheWVyQnV0dG9uLnZlcnRpY2FsQWxpZ24gPSBcInRvcFwiO1xyXG4gICAgICAgIHRoaXMuc2hvd092ZXJMYXllckJ1dHRvbi5ob3Jpem9udGFsQWxpZ24gPSBcImxlZnRcIjtcclxuICAgICAgICB0aGlzLnNob3dPdmVyTGF5ZXJCdXR0b24uY2xpY2tlZC5hZGRFdmVudExpc3RlbmVyKHRoaXMuc2hvd0hpZGVPdmVybGF5Q2xpY2tlZCk7XHJcbiAgICAgICAgdGhpcy5zaG93T3ZlckxheWVyQnV0dG9uLnByb3BlcnRpZXMuYmFja2dyb3VuZEZpbGxTdHlsZSA9IFwicmdiYSgwLCAwLCAwLCAwLjUpXCI7XHJcbiAgICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKHRoaXMuc2hvd092ZXJMYXllckJ1dHRvbik7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5nc0xpc3QgPSBuZXcgTGlzdFZpZXcoKTtcclxuICAgICAgICB2YXIgYnRuMSA9IG5ldyBCdXR0b24oKTtcclxuICAgICAgICBidG4xLnByb3BlcnRpZXMuZmlsbFN0eWxlID0gXCJ3aGl0ZVwiO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3NMaXN0Lml0ZW1zLnB1c2goYnRuMSk7XHJcbiAgICAgICAgQXBwLnNldHRpbmdzLm9uQWRkU3RhckxheWVyLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5hZGRTdGFyTGF5ZXIpO1xyXG4gICAgICAgIEFwcC5zZXR0aW5ncy5vblJlbW92ZVN0YXJMYXllci5hZGRFdmVudExpc3RlbmVyKHRoaXMucmVtb3ZlU3RhckxheWVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkU3RhckxheWVyID0gKHN0YXJMYXllcjogU3RhckxheWVyKSA9PiB7XHJcbiAgICAgICAgdGhpcy51cGRhdGVTZXR0aW5ncygpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyByZW1vdmVTdGFyTGF5ZXIgPSAoc3RhckxheWVyOiBTdGFyTGF5ZXIpID0+IHtcclxuICAgICAgICB0aGlzLnVwZGF0ZVNldHRpbmdzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzaG93SGlkZU92ZXJsYXlDbGlja2VkID0gKHNlbmRlcjogQ29udHJvbCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLnZpZXdNb2RlbC5zdGF0ZSA9PSBTZXR0aW5nc092ZXJsYXlWaWV3TW9kZWxTdGF0ZS52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoU2V0dGluZ3NPdmVybGF5Vmlld01vZGVsU3RhdGUuYmVmb3JlVmlzaWJsZSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShTZXR0aW5nc092ZXJsYXlWaWV3TW9kZWxTdGF0ZS52aXNpYmxlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHVwZGF0ZUxheW91dChjdHg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCwgYm91bmRzOiBSZWN0YW5nbGUpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNob3dPdmVyTGF5ZXJCdXR0b24uYWxpZ24oY3R4LCBuZXcgUG9pbnQoYm91bmRzLngsIGJvdW5kcy55KSk7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5nc0xpc3QudXBkYXRlTGF5b3V0KGN0eCwgbmV3IFJlY3RhbmdsZSgxMDAsIDEwMCwgNDAwLCA0MDApKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIG1vdXNlTW92ZSA9IChldjogTW91c2VFdmVudCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLnZpZXdNb2RlbC5zdGF0ZSA9PSBTZXR0aW5nc092ZXJsYXlWaWV3TW9kZWxTdGF0ZS5oaWRkZW4gfHwgdGhpcy52aWV3TW9kZWwuc3RhdGUgPT0gU2V0dGluZ3NPdmVybGF5Vmlld01vZGVsU3RhdGUuYmVmb3JlVmlzaWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKFNldHRpbmdzT3ZlcmxheVZpZXdNb2RlbFN0YXRlLmJlZm9yZVZpc2libGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzdXBlci5tb3VzZU1vdmUoZXYpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBtb3VzZUluYWN0aXZpdHlIYW5kbGVyID0gKCkgPT4ge1xyXG4gICAgICAgIGlmIChEYXRlLm5vdygpIC0gdGhpcy5sYXN0TW92ZWQgPj0gdGhpcy5pbmFjdGl2aXR5VGltZW91dCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy52aWV3TW9kZWwuc3RhdGUgPT0gU2V0dGluZ3NPdmVybGF5Vmlld01vZGVsU3RhdGUuYmVmb3JlVmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZShTZXR0aW5nc092ZXJsYXlWaWV3TW9kZWxTdGF0ZS5oaWRkZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCh0aGlzLm1vdXNlSW5hY3Rpdml0eUhhbmRsZXIsIHRoaXMuaW5hY3Rpdml0eVRpbWVvdXQgLSAoRGF0ZS5ub3coKSAtIHRoaXMubGFzdE1vdmVkKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgc2V0U3RhdGUgPSAoc3RhdGU6IFNldHRpbmdzT3ZlcmxheVZpZXdNb2RlbFN0YXRlKSA9PiB7XHJcbiAgICAgICAgc3dpdGNoIChzdGF0ZSkge1xyXG4gICAgICAgICAgICBjYXNlIFNldHRpbmdzT3ZlcmxheVZpZXdNb2RlbFN0YXRlLmhpZGRlbjpcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvd092ZXJMYXllckJ1dHRvbi5pc1Zpc2libGUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMudmlld01vZGVsLnN0YXRlID0gU2V0dGluZ3NPdmVybGF5Vmlld01vZGVsU3RhdGUuaGlkZGVuO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgU2V0dGluZ3NPdmVybGF5Vmlld01vZGVsU3RhdGUuYmVmb3JlVmlzaWJsZTpcclxuICAgICAgICAgICAgICAgIHRoaXMubGFzdE1vdmVkID0gRGF0ZS5ub3coKTtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZXdNb2RlbC5zdGF0ZSA9PSBTZXR0aW5nc092ZXJsYXlWaWV3TW9kZWxTdGF0ZS5oaWRkZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KHRoaXMubW91c2VJbmFjdGl2aXR5SGFuZGxlciwgdGhpcy5pbmFjdGl2aXR5VGltZW91dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93T3ZlckxheWVyQnV0dG9uLmlzVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy52aWV3TW9kZWwuc3RhdGUgPT0gU2V0dGluZ3NPdmVybGF5Vmlld01vZGVsU3RhdGUudmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQodGhpcy5tb3VzZUluYWN0aXZpdHlIYW5kbGVyLCB0aGlzLmluYWN0aXZpdHlUaW1lb3V0KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoaWxkcmVuLnJlbW92ZUl0ZW1JZkV4aXN0cyh0aGlzLnNldHRpbmdzTGlzdCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXdNb2RlbC5zdGF0ZSA9IFNldHRpbmdzT3ZlcmxheVZpZXdNb2RlbFN0YXRlLmJlZm9yZVZpc2libGU7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSBTZXR0aW5nc092ZXJsYXlWaWV3TW9kZWxTdGF0ZS52aXNpYmxlOlxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmlld01vZGVsLnN0YXRlID09IFNldHRpbmdzT3ZlcmxheVZpZXdNb2RlbFN0YXRlLmJlZm9yZVZpc2libGUpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2godGhpcy5zZXR0aW5nc0xpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMudmlld01vZGVsLnN0YXRlID0gU2V0dGluZ3NPdmVybGF5Vmlld01vZGVsU3RhdGUudmlzaWJsZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHVwZGF0ZVNldHRpbmdzKCkge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3NMaXN0Lml0ZW1zID0gW107XHJcbiAgICAgICAgZm9yIChjb25zdCBsYXllciBvZiBBcHAuc2V0dGluZ3Muc3RhckxheWVycykge1xyXG4gICAgICAgICAgICB2YXIgYnRuRm9yTGF5ZXIgPSBuZXcgQnV0dG9uKCk7XHJcbiAgICAgICAgICAgIGJ0bkZvckxheWVyLnRleHQgPSBcIlJlbW92ZSBMYXllclwiO1xyXG4gICAgICAgICAgICBidG5Gb3JMYXllci50YWcgPSBsYXllcjtcclxuICAgICAgICAgICAgYnRuRm9yTGF5ZXIucHJvcGVydGllcy5maWxsU3R5bGUgPSBcIndoaXRlXCI7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0dGluZ3NMaXN0Lml0ZW1zLnB1c2goYnRuRm9yTGF5ZXIpO1xyXG4gICAgICAgICAgICBidG5Gb3JMYXllci5jbGlja2VkLmFkZEV2ZW50TGlzdGVuZXIoKHNlbmRlcjogQ29udHJvbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgQXBwLnNldHRpbmdzLnJlbW92ZVN0YXJMYXllcihsYXllcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgYnRuRm9yTmV3TGF5ZXIgPSBuZXcgQnV0dG9uKCk7XHJcbiAgICAgICAgYnRuRm9yTmV3TGF5ZXIudGV4dCA9IFwiQWRkIExheWVyXCI7XHJcbiAgICAgICAgYnRuRm9yTmV3TGF5ZXIucHJvcGVydGllcy5maWxsU3R5bGUgPSBcIndoaXRlXCI7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5nc0xpc3QuaXRlbXMucHVzaChidG5Gb3JOZXdMYXllcik7XHJcbiAgICAgICAgYnRuRm9yTmV3TGF5ZXIuY2xpY2tlZC5hZGRFdmVudExpc3RlbmVyKChzZW5kZXI6IENvbnRyb2wpID0+IHtcclxuICAgICAgICAgICAgQXBwLnNldHRpbmdzLmFkZFN0YXJMYXllcigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMudHJpZ2dlclVwZGF0ZUxheW91dCgpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4vYXBwXCI7XHJcbmltcG9ydCB7IFN0YXJMYXllciB9IGZyb20gXCIuL21vZGVscy9zdGFyTGF5ZXJcIjtcclxuaW1wb3J0IHsgRUFuaW1hdGlvbiB9IGZyb20gXCIuLi9lbmMvc3JjL2VBbmltYXRpb25cIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBTdGFyTGF5ZXJBbmltYXRvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgc3RhckxheWVyOiBTdGFyTGF5ZXIpIHtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgdXBkYXRlID0gKHRpbWVEaWZmOiBudW1iZXIpID0+IHtcclxuICAgICAgICBmb3IgKGNvbnN0IHN0YXIgb2YgdGhpcy5zdGFyTGF5ZXIuc3RhcnMpIHtcclxuICAgICAgICAgICAgc3Rhci54ICs9IHRoaXMuc3RhckxheWVyLnNwZWVkICogdGltZURpZmY7XHJcbiAgICAgICAgICAgIGlmIChzdGFyLnggPiBBcHAuc2V0dGluZ3Mud2lkdGgpIHtcclxuICAgICAgICAgICAgICAgIHN0YXIueCAtPSBBcHAuc2V0dGluZ3Mud2lkdGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBMYXlvdXRWaWV3IH0gZnJvbSBcIi4uL2VuYy9zcmMvdWkvbGF5b3V0Q29udHJvbHMvbGF5b3V0Vmlld1wiO1xyXG5pbXBvcnQgeyBSZWN0YW5nbGUgfSBmcm9tIFwiLi4vZW5jL3NyYy9nZW9tZXRyeS9yZWN0YW5nbGVcIjtcclxuaW1wb3J0IHsgUXVpY2tEcmF3VmlldyB9IGZyb20gXCIuLi9lbmMvc3JjL3VpL3F1aWNrRHJhd1ZpZXdcIjtcclxuaW1wb3J0IHsgU3RhckxheWVyRHJhd2VyIH0gZnJvbSBcIi4vc3RhckxheWVyRHJhd2VyXCI7XHJcbmltcG9ydCB7IFNldHRpbmdzT3ZlcmxheVZpZXcgfSBmcm9tIFwiLi9vdmVybGF5L3NldHRpbmdzT3ZlcmxheVZpZXdcIjtcclxuaW1wb3J0IHsgU3RhckxheWVyIH0gZnJvbSBcIi4vbW9kZWxzL3N0YXJMYXllclwiO1xyXG5pbXBvcnQgeyBBcHAgfSBmcm9tIFwiLi9hcHBcIjtcclxuaW1wb3J0IHsgU3RhckxheWVyQW5pbWF0b3IgfSBmcm9tIFwiLi9zdGFyTGF5ZXJBbmltYXRvclwiO1xyXG5pbXBvcnQgeyBFQW5pbWF0aW9uIH0gZnJvbSBcIi4uL2VuYy9zcmMvZUFuaW1hdGlvblwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEluc3BpZXJ0eVBsYXllclZpZXcgZXh0ZW5kcyBMYXlvdXRWaWV3IHtcclxuICAgIHByaXZhdGUgc3RhckxheWVyczogU3RhckxheWVyRHJhd2VyW10gPSBbXTtcclxuICAgIHByaXZhdGUgc3RhckFuaW1hdG9yczogU3RhckxheWVyQW5pbWF0b3JbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBzZXR0aW5nc092ZXJsYXk6IFNldHRpbmdzT3ZlcmxheVZpZXc7XHJcbiAgICBhbmltOiBFQW5pbWF0aW9uO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0dGluZ3NPdmVybGF5ID0gbmV3IFNldHRpbmdzT3ZlcmxheVZpZXcoKTtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuLnB1c2godGhpcy5zZXR0aW5nc092ZXJsYXkpO1xyXG4gICAgICAgIHRoaXMuYW5pbSA9IG5ldyBFQW5pbWF0aW9uKCk7XHJcbiAgICAgICAgQXBwLnNldHRpbmdzLm9uQWRkU3RhckxheWVyLmFkZEV2ZW50TGlzdGVuZXIodGhpcy5hZGRTdGFyTGF5ZXIpO1xyXG4gICAgICAgIEFwcC5zZXR0aW5ncy5vblJlbW92ZVN0YXJMYXllci5hZGRFdmVudExpc3RlbmVyKHRoaXMucmVtb3ZlU3RhckxheWVyKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYWRkU3RhckxheWVyID0gKHN0YXJMYXllcjogU3RhckxheWVyKSA9PiB7XHJcbiAgICAgICAgdmFyIGxheWVyID0gbmV3IFN0YXJMYXllckRyYXdlcihzdGFyTGF5ZXIpO1xyXG4gICAgICAgIHRoaXMuc3RhckxheWVycy5wdXNoKGxheWVyKTtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuLnNwbGljZSgwLCAwLCBsYXllcik7XHJcbiAgICAgICAgdGhpcy50cmlnZ2VyVXBkYXRlTGF5b3V0KCk7XHJcblxyXG4gICAgICAgIHZhciBhbmltYXRvciA9IG5ldyBTdGFyTGF5ZXJBbmltYXRvcihzdGFyTGF5ZXIpO1xyXG4gICAgICAgIHRoaXMuYW5pbS5hZGRVcGRhdGVGdW5jdGlvbihhbmltYXRvci51cGRhdGUpO1xyXG4gICAgICAgIHRoaXMuc3RhckFuaW1hdG9ycy5wdXNoKGFuaW1hdG9yKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgcmVtb3ZlU3RhckxheWVyID0gKHN0YXJMYXllcjogU3RhckxheWVyKSA9PiB7XHJcbiAgICAgICAgdmFyIGxheWVyID0gdGhpcy5zdGFyTGF5ZXJzLmZpcnN0KHggPT4geC5zdGFyTGF5ZXIgPT0gc3RhckxheWVyKTtcclxuICAgICAgICB0aGlzLmNoaWxkcmVuLnJlbW92ZSh4ID0+IHggPT0gbGF5ZXIpO1xyXG4gICAgICAgIHRoaXMuc3RhckxheWVycy5yZW1vdmUoeCA9PiB4ID09IGxheWVyKTtcclxuXHJcbiAgICAgICAgdmFyIGFuaW1hdG9yID0gdGhpcy5zdGFyQW5pbWF0b3JzLmZpcnN0KHggPT4geC5zdGFyTGF5ZXIgPT0gc3RhckxheWVyKTtcclxuICAgICAgICB0aGlzLmFuaW0ucmVtb3ZlVXBkYXRlRnVuY3Rpb24oYW5pbWF0b3IudXBkYXRlKTtcclxuICAgICAgICB0aGlzLnN0YXJBbmltYXRvcnMucmVtb3ZlSXRlbShhbmltYXRvcik7XHJcblxyXG4gICAgICAgIHRoaXMudHJpZ2dlclVwZGF0ZUxheW91dCgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVMYXlvdXQoY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQsIGJvdW5kczogUmVjdGFuZ2xlKTogdm9pZCB7XHJcbiAgICAgICAgZm9yIChjb25zdCBsYXllciBvZiB0aGlzLnN0YXJMYXllcnMpIHtcclxuICAgICAgICAgICAgbGF5ZXIudXBkYXRlTGF5b3V0KGN0eCwgYm91bmRzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZXR0aW5nc092ZXJsYXkudXBkYXRlTGF5b3V0KGN0eCwgYm91bmRzKTtcclxuICAgIH1cclxufSIsImltcG9ydCB7IFN0YXIgfSBmcm9tIFwiLi9zdGFyXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgU3RhckxheWVyIHtcclxuICAgIHB1YmxpYyBzdGFyczogU3RhcltdID0gW107XHJcbiAgICBwdWJsaWMgc3BlZWQgPSBNYXRoLnJhbmRvbSgpICogMjAgKyA1O1xyXG59IiwiaW1wb3J0IHsgU3RhZ2UgfSBmcm9tIFwiLi4vZW5jL3NyYy91aS9zdGFnZVwiO1xyXG5pbXBvcnQgeyBJbnNwaWVydHlQbGF5ZXJWaWV3IH0gZnJvbSBcIi4vaW5zcGllcnR5UGxheWVyVmlld1wiO1xyXG5pbXBvcnQgeyBTZXR0aW5ncyB9IGZyb20gXCIuL21vZGVscy9zZXR0aW5nc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEFwcCB7XHJcbiAgICBwdWJsaWMgc3RhdGljIHNldHRpbmdzID0gbmV3IFNldHRpbmdzKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xyXG5cclxuICAgIHB1YmxpYyBydW4gPSAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJoaVwiKTtcclxuXHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBcImJsYWNrXCI7XHJcbiAgICAgICAgdmFyIHN0YWdlID0gU3RhZ2UuY3JlYXRlKCk7XHJcblxyXG4gICAgICAgIHZhciB2aWV3ID0gbmV3IEluc3BpZXJ0eVBsYXllclZpZXcoKTtcclxuICAgICAgICBzdGFnZS5zZXRWaWV3KHZpZXcpO1xyXG4gICAgfVxyXG59IiwiaW1wb3J0IHsgU3RhckxheWVyIH0gZnJvbSBcIi4vc3RhckxheWVyXCI7XHJcbmltcG9ydCB7IEVFdmVudFQsIEVFdmVudCB9IGZyb20gXCIuLi8uLi9lbmMvc3JjL2VFdmVudFwiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNldHRpbmdzIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihwdWJsaWMgd2lkdGg6IG51bWJlciwgcHVibGljIGhlaWdodDogbnVtYmVyKSB7IH1cclxuXHJcbiAgICBwdWJsaWMgb25BZGRTdGFyTGF5ZXIgPSBuZXcgRUV2ZW50VDxTdGFyTGF5ZXI+KCk7XHJcbiAgICBwdWJsaWMgb25SZW1vdmVTdGFyTGF5ZXIgPSBuZXcgRUV2ZW50VDxTdGFyTGF5ZXI+KCk7XHJcbiAgICBwdWJsaWMgc3RhckxheWVyczogU3RhckxheWVyW10gPSBbXTtcclxuXHJcbiAgICBwdWJsaWMgYWRkU3RhckxheWVyID0gKCkgPT4ge1xyXG4gICAgICAgIHZhciBzdGFyTGF5ZXIgPSBuZXcgU3RhckxheWVyKCk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTAwOyBpKyspIHtcclxuICAgICAgICAgICAgc3RhckxheWVyLnN0YXJzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgeDogTWF0aC5yYW5kb20oKSAqIHRoaXMud2lkdGgsXHJcbiAgICAgICAgICAgICAgICB5OiBNYXRoLnJhbmRvbSgpICogdGhpcy5oZWlnaHQsXHJcbiAgICAgICAgICAgICAgICByOiBNYXRoLnJhbmRvbSgpICogMiArIDAuMDVcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuc3RhckxheWVycy5wdXNoKHN0YXJMYXllcik7XHJcbiAgICAgICAgdGhpcy5vbkFkZFN0YXJMYXllci5kaXNwYXRjaEV2ZW50KHN0YXJMYXllcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIHJlbW92ZVN0YXJMYXllciA9IChzdGFyTGF5ZXI6IFN0YXJMYXllcikgPT4ge1xyXG4gICAgICAgIHRoaXMuc3RhckxheWVycy5yZW1vdmVJdGVtKHN0YXJMYXllcik7XHJcbiAgICAgICAgdGhpcy5vblJlbW92ZVN0YXJMYXllci5kaXNwYXRjaEV2ZW50KHN0YXJMYXllcik7XHJcbiAgICB9XHJcbn1cclxuIiwiaW1wb3J0IHsgQXBwIH0gZnJvbSBcIi4vYXBwXCI7XG5pbXBvcnQgXCIuLi9lbmMvc3JjL2V4dGVuc2lvbnNcIjtcblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIG1haW4sIGZhbHNlKTtcblxuZnVuY3Rpb24gbWFpbigpIHtcbiAgICB2YXIgYXBwID0gbmV3IEFwcCgpO1xuICAgIGFwcC5ydW4oKTtcbn0iXSwic291cmNlUm9vdCI6IiJ9